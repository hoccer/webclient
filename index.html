<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Hoccer Webapp</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Robert Palmer">
	<!-- Date: 2010-12-15 -->
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	
	<script src="lib/linccer/lib/jquery-1.4.4.js" type="text/javascript" charset="utf-8"></script>
	<script src="shadowbox/shadowbox.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/linccer/lib/base.js" type="text/javascript" charset="utf-8"></script>
	
	<script src="lib/linccer/lib/linccer.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/linccer/lib/filecache.js" type="text/javascript" charset="utf-8"></script>
	<script src="hoccer_map.js" type="text/javascript" charset="utf-8"></script>
	<script src="webclient.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">	
		$(document).ready(function() {
			var LOCATION_ERROR = 'Could not locate you. Please set your location manually.';
			var TIMEOUT_ERROR = 'No transfer partner found';
			
			var fileCache = FileCache( {'api_key': 'b3b03410159c012e7b5a00163e001ab0' });
			var linccer = Linccer( {'api_key' : 'b3b03410159c012e7b5a00163e001ab0'});

			var map = HoccerMap('map_canvas');
			var client = WebClient(map);
		 	client.setInactive();
		
			var content;
		
			var showImage = function(uri) {
				Shadowbox.open({
					content: uri,
					player : "img"
				});
				
			}
		
			var showDownload = function(uri) {
				window.location = uri;
			}
			
			var showText = function(text) {
				Shadowbox.open({
					content:  "<div class=\"box\">" +
									  "<h2>Received Text</h2>" +
										"<textarea class='received_text'>" + text + "</textarea>" +
										"</div>",

					player : "html"
				});
			}
		
		  map.on('position_changed', function() {
				linccer.setEnvironmentCoordinates(map.latitude, map.longitude, 100);
			});
			
			map.on('address_changed', function(address) {
				$("#coordinates").text(address);
			})
		
		  client.on('send', function() {
				client.connecting();
				var data = { 'client' : 'webclient', 'data': [ client.content() ] };
				linccer.send("one-to-one", data);
			});
			
			client.on('receive', function() {
				client.connecting();
				
				linccer.receive("one-to-one")
			});
			
			client.on('file_selected', function(file) {
				content = fileCache.upload(file);
				client.setContent(content);	
			});
			
			fileCache.on('started', function(url) {
			});
			
			fileCache.on('progress', function(progress) {
			});

			fileCache.on('uploaded', function(uri) {
			});
			
			linccer.on('ready', function() {
				client.displayLocation();
				client.setActive();
			})
			
			linccer.on('updated_environment', function(data) {
				map.setCenter(data.gps.latitude, data.gps.longitude)
			});
			
			linccer.on('sent', function(data) {
				client.unconnecting();
				client.showSuccess();
			});

			linccer.on('received', function(data) {
				client.unconnecting();
				client.showSuccess();
				
				var firstContent = data[0]['data'][0];
				
				if (firstContent.type == "text/plain") {
					showText(firstContent.content);
				} else if (firstContent.type == "image/jpeg") {
					showImage(firstContent.uri);
				} else if (firstContent.type == "text/uri-list") {
					showDownload(firstContent.content);
				} else {
					showDownload(firstContent.uri)
				}
				
			});
		
			linccer.on('error', function(error) {
				
				if (error.code == 3) {
					$("#coordinates").text(LOCATION_ERROR);
					client.displayLocation();
				} else {
					client.showError(TIMEOUT_ERROR);
				}
			});
		});

	</script>
	<script type="text/javascript">
    Shadowbox.init(
    {players: ["html", "iframe", "img"]}
    );
  </script>

	<link rel="stylesheet" href="shadowbox/shadowbox.css" type="text/css" media="screen" title="no title" charset="utf-8">
	<link rel="stylesheet" href="http://hoccer.com/wp-content/themes/hoccer/css/defaults.css" />
  <link rel="stylesheet" href="http://hoccer.com/wp-content/themes/hoccer/css/style.css" />
	<style type="text/css" media="screen">
	
		#location #coordinates { display: none; }
		#webclient .info_box { margin-bottom: 10px; }
		.info_box section { border: 0; }
		#map_canvas { height: 450px; padding-top: 6px;}
		#map_container { position: absolute; width: 520px; padding: 10px; margin-top: -1200px;}
		#map_container { font-size: 15pt;}
		#location #show_map {float: right;}
		
		#location span, #content_select span, .centered span { vertical-align: middle; }
		#location img, #content_select img, .centered img { margin: 0 5px 0 0; padding: 0; vertical-align: middle;}
		#content_select, .centered { font-size: 15pt; }
		#content_select { line-height: 90px;}
		
		#receive_mode_button, #send_mode_button, #transfer_button, #fileInputField { cursor: pointer }
		
		#textinput {
			vertical-align: center;
			float:right;
			padding: 20px;
		}
		
		#fileinput {
			float: left;
			width: 230px;
			height: 100px;
		}
		
		#fileInputField {
			width: 230px;
		}
		
		#content_select {
			text-align: center;
			display: none;
		}
		
		#transfer h1 			{ padding: 0 15px 10px; }
		#transfer h1 span { vertical-align: middle; }
		#transfer h1 img 	{ margin: 0 5px 0 0; padding: 0; vertical-align: middle;}
	
		#transfer img#drag { 
			float: left; 
			margin-left: 15px; 
			border: 1px solid #bdbdbd;
		  -moz-border-radius: 5px;
		  -webkit-border-radius: 5px;
		}
		
		#transfer_action { float: right; width: 300px;}
		#transfer_action ol { 
			list-style-position: inside;
			margin: 0;
		}

		#transfer_button {
			background: url('images/start_transfer.png') no-repeat;
		}
		
		#connecting_info {
			visibility: hidden;
			margin-bottom: 30px;
		}
		
		#addressForm {
			margin: 10px 0;
		}
		
		.button { 
			font-size: 14pt;
			width: 250px;
			height: 36px;
			
			color: #fff;
		  background-repeat: no-repeat;
		  -moz-box-shadow: 0 0 8px rgba(0, 0, 0, 0.20);
		  -webkit-box-shadow: 0 0 8px rgba(0, 0, 0, 0.20);
		  box-shadow: 0 0 8px rgba(0, 0, 0, 0.20);
		  -moz-border-radius: 5px;
		  -webkit-border-radius: 5px;
		}
		
		.button img, .button span {
			vertical-align: middle;
			margin: 4px 5px;
		}
		
		.button img {
			padding: 4px 15px 4px 35px;
		}
		
		div.fileinputs {
			position: relative;
		}

		div.fakefile {
			position: absolute;
			top: 0;
			left: 20px;
			z-index: 1;
		}

		input.file {
			position: relative;
			
			text-align: right;
			-moz-opacity:0 ;
			filter:alpha(opacity: 0);
			opacity: 0;
			z-index: 2;
			
			height: 50px;	
			width: 260px;
		}
		
	
		#send_mode_button img, #receive_mode_button img { 
			visibility: hidden;
		}
		
		#send_mode_button {
			background: #DDD url('images/send_gray.png') no-repeat;
		}
		
		#receive_mode_button {
			background: #DDD url('images/receive_blau.png') no-repeat;
		}
		
		.info_box #send_mode_button {
			border-width: 0px;
		}
		
		textarea {
			width: 210px;
			-moz-border-radius: 5px;
		  -webkit-border-radius: 5px;
		  
			background: #F6F6F6;
		}
		
		hr {
			background-color: #F0F0F0;
			
			display: block;
			height: 1px;
			border: 0;
			border-top: 1px solid #CCC;
			margin: 0;
			padding: 0;
		}
		
		#sb-body {
			background-color: #fbfbfb;
		}
		
		.box {
			margin: 20px;
		}
		
		.box h2 {
			padding-bottom: 15px;
		}
		
		.box textarea {
			width: 450px;
			height: 210px;
		}
				
	</style>
	
</head>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->

<!--[if lt IE 7 ]> <body class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <body class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <body class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <body class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <body> <!--<![endif]-->
  <div id="container">
    <header>
      <div class="row">
        <div class="column grid_3">
           <a href="/">
          <img src="http://hoccer.com/wp-content/themes/hoccer/images/logo.jpg" alt="logo" />
          </a>
        </div>
        <nav id="main_navigation" class="column grid_9">
          <ul>
            <!-- <li><a href="/hoc/">Send &amp; Receive</a></li> -->
            <li><a href="/webapp/">Web App</a></li>
            <li><a href="/support/">Support</a></li>
            <li><a href="/developer/">Developer</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="/company/">Company</a></li>
            <li><a href="/contact/">Contact</a></li>
            <li><a href="http://www.twitter.com/hoccer"><img src="http://hoccer.com/wp-content/themes/hoccer/images/twitter.png" alt="twitter"/></a></li>
            <li><a href="http://www.facebook.com/hoccer"><img src="http://hoccer.com/wp-content/themes/hoccer/images/facebook.png" alt="facebook"/></a></li>
          </ul>
        </nav>
      </div>
    </header>

    <div class="page">
      <div class="row">
      	<div class="column grid_12 page_header page_header_small">
        	<h1>Web App</h1>
        	<p class="grid_5"></p>
       	</div>
    	</div>
			<div id="webclient">
				<div class="row">
					<div class="column grid_3 info_box centered">
						<section id="receive_mode_button">
							<img src="images/webapp_btn_receive.png" width="68" height="52" alt="Receive" />
						</section>
					</div>
					<div class="column grid_1">&nbsp;</div>
					<div class="column grid_3 info_box centered">
						<section id="send_mode_button">
							<img src="images/webapp_btn_send.png" width="68" height="52" alt="Send" />
						</section>
					</div>
				</div>

				<div class="row">
					<div class="column grid_7 info_box" id="content_select">
						<section>
 							<div id="fileinput" class="fileinputs">
								<input type="file" class="file" id="fileInputField" />
								<div class="fakefile">
									<img src="images/webapp_icon_selectfile.png"width="52" height="40" alt="Select File">
									<span id="filename">Select File</span>
								</div>
							</div>
							<span>or</span>
							<div id="textinput">
								<textarea type="text" id="textcontent" placeholder="Enter text or url ..."></textarea>
							</div>
						</section>
					</div>
				</div>

				<div class="row">
					<div id="location" class="column grid_7 info_box" >
						<section><p><img src="images/webapp_icon_location.png" width="27" height="25" alt="Location">
							<span id="waiting">locating...</span>
							<span id="coordinates"></span>
							<span id="show_map"><a href="#">Change</a></span>
							<div id="map_container">
								<hr />
								<form id="addressForm"><input id="addressInput" type="text" /><input type="Submit" value="search" /></form>
								<div id="map_canvas"></div>
							</div>
						</p></section>
					</div>
					<div class="column grid_5">
					</div>
				</div>
				<div class="row">
					<div class="column grid_7 info_box" id="transfer">
						<section><p>
							<h1>
								<img src="images/webapp_icon_transfer.png" width="27" height="25" alt="Icon Transfer" />
								<span>Transfer Data</span>
							</h1>
							<img id="drag" src="images/drag.jpg" width="200" height="126" alt="Drag">
							<div id="transfer_action">
								<div id="transfer_button" class="button">
									&nbsp;
								</div>
								<div id="connecting_info">Connecting..</div>
								<ol id="help">
									<li>Select content in Hoccer on your mobile</li>
									<li>Swipe it out of your mobile's screen</li>
									<li>Hit "Start Transfer" Button above</li>
								</ol>
							</div>
							<br style="clear: both" />
						</p></section>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>
