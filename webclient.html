<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Hoccer Webclient</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Robert Palmer">
	<!-- Date: 2010-12-15 -->
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	
	<script src="lib/linccer/lib/jquery-1.4.4.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/linccer/lib/base.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/linccer/lib/linccer.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/linccer/lib/filecache.js" type="text/javascript" charset="utf-8"></script>
	<script src="webclient.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">	
		$(document).ready(function() {
			var fileCache = FileCache( {'api_key': 'e101e890ea97012d6b6f00163e001ab0', 'server': 'beta' });			
			var linccer = Linccer( {'api_key' : 'e101e890ea97012d6b6f00163e001ab0', 'server': 'beta'});

			var map = HoccerMap('map_canvas');
			var client = WebClient(map);
		 	
			var content;
		
		  map.on('position_changed', function() {
				linccer.setEnvironmentCoordinates(map.latitude, map.longitude, 100);
			});
			
			map.on('address_changed', function(address) {
				$("#coordinates").text(address);
			})
		
		  client.on('send', function() {
				var data = [ content ];

				linccer.send("one-to-many", data);
			});

			client.on('receive', function() {
				linccer.receive("one-to-many")
			});
			
			fileCache.on('started', function(url) {
				console.log('started:' + url);
			});
			
			fileCache.on('progress', function(progress) {
				// console.log(progress);
			});

			fileCache.on('uploaded', function(uri) {
		    console.log("uploaded: " + uri);
			});
			
			linccer.on('sent', function(data) {
				console.log("sent!!!!!! " + data);
			});
			
			linccer.on('ready', function() {
				client.displayLocation();
			})
			
			linccer.on('updated_environment', function(data) {
				console.log('updated environments!!!!!');
				map.setCenter(data.gps.latitude, data.gps.longitude)
			});
			
			linccer.on('received', function(data) {
				console.log(data);
				document.getElementById("input").value = data[0][0].content;
			});
			
			linccer.on('error', function(error) {
				console.log(error);
			});
						
			$("#fileInputField").change(function() {
				var file = document.getElementById('fileInputField').files[0];
				content = fileCache.upload(file);
			});				
		});
		

		
	</script>
	
	<link rel="stylesheet" href="http://hoccer.com/wp-content/themes/hoccer/css/defaults.css" />
  <link rel="stylesheet" href="http://hoccer.com/wp-content/themes/hoccer/css/style.css" />
	<style type="text/css" media="screen">
	
		#location #coordinates { display: none; }
		#webclient .info_box { margin-bottom: 10px; }
		.info_box section { border: 0; }
		#map_canvas { height: 450px; }
		#map_container { position: absolute; width: 650px; margin-top: -1000px; }
		
		#location span, #content_select span, .centered span { vertical-align: middle; }
		#location img, #content_select img, .centered img { margin: 0 5px 0 0; padding: 0; vertical-align: middle;}
		#content_select, .centered { font-size: 15pt; }
		
		#textinput {
			vertical-align: center;
			float:right;
			
			padding: 20px;
		}
		
		#fileinput {
			float: left;
			width: 300px;
			height: 100px;
		}
		
		#content_select {
			text-align: center;
			display: none;
		}
		
		#transfer h1 {  padding: 0 15px 10px; }
		#transfer h1 span { vertical-align: middle; }
		#transfer h1 img { margin: 0 5px 0 0; padding: 0; vertical-align: middle;}
	
		#transfer img#drag { 
			float: left; 
			margin-left: 15px; 
			border: 1px solid #bdbdbd;
		  -moz-border-radius: 5px;
		  -webkit-border-radius: 5px;
		}
		
		#transfer_action { float: right; width: 340px;}
		#transfer_action ol { 
			list-style-position: inside;
			margin: 0;
		}
		#transfer_button { width: 315px; margin-bottom: 17px; }	
		
		.button { 
			height: 31px;
			font-size: 14pt;
			
			color: #fff;
			background-color: #39A7BE; 
					
		  background-repeat: no-repeat;
		  -moz-box-shadow: 0 0 8px rgba(0, 0, 0, 0.20);
		  -webkit-box-shadow: 0 0 8px rgba(0, 0, 0, 0.20);
		  box-shadow: 0 0 8px rgba(0, 0, 0, 0.20);
		  -moz-border-radius: 5px;
		  -webkit-border-radius: 5px;
		}
		
		.button img, .button span {
			vertical-align: middle;
			margin: 4px 5px;
		}
		.button img {
			margin: 4px 15px 4px 35px;
		}
			
		div.fileinputs {
			position: relative;
		}

		div.fakefile {

			position: absolute;
			top: 30px;
			left: 30px;
			z-index: 1;
		}

		input.file {
			border: 1px solid gray;
			position: relative;
			text-align: right;
			-moz-opacity:0 ;
			filter:alpha(opacity: 0);
			opacity: 0;
			z-index: 2;
			
			height: 70px;
			
		}
	</style>
	
</head>
<body style="padding: 30px">
	<div id="webclient">
		<div class="row">
			<div class="column grid_4 info_box centered">
				<section id="receive_mode_button">
					<img src="images/webapp_btn_receive.png" width="68" height="52" alt="Webapp Btn Receive">Receive
				</section>
			</div>
		
			<div class="column grid_4 info_box centered">
				<section id="send_mode_button">
					<img src="images/webapp_btn_send.png" width="68" height="52" alt="Webapp Btn Send">Send
				</section>
			</div>
		</div>

		<div class="row">
			<div id="location" class="column grid_8 info_box" >
				<section><p><img src="images/webapp_icon_location.png" width="27" height="25" alt="Webapp Icon Location">
					<span id="waiting">locating...</span>
					<span id="coordinates">32,12 1212</span>
					<span id="show_map"><a href="#">Change</a></span>
				</p></section>
				<div id="map_container" style="background-color: green">
					<form id="addressForm"><input id="addressInput" type="text" /><input type="Submit" value="search" /></form>
					<div id="map_canvas">
					</div>
				</div>
			</div>
			<div class="column grid_5">
			</div>
		</div>

		<div class="row">
			<div class="column grid_8 info_box" id="content_select">
				<section>
 			
				<div id="fileinput" class="fileinputs">
					<input type="file" class="file" id="fileInputField" />
					<div class="fakefile">
						<img src="images/webapp_icon_selectfile.png" width="52" height="40" alt="Webapp Icon Selectfile">
						<span>Select File</span>
					</div>
				</div>
				or
				<div id="textinput">
					<textarea id="textcontent"></textarea>
				</div>
				</section>
			</div>
		</div>
		
		<div class="row">
			<div class="column grid_8 info_box" id="transfer">
				<section><p>
					<h1>
					<img src="images/webapp_icon_transfer.png" width="27" height="25" alt="Icon Transfer" />
					<span>Transfer Data</span>
					</h1>
				
					<img id="drag" src="images/drag.jpg" width="200" height="126" alt="Drag">
				
					<div id="transfer_action">
						<div id="transfer_button" class="button">
							<img src="images/webapp_icon_starttransfer.png" width="27" height="22" alt="Webapp Icon Starttransfer">
							<span>Start Transfer</span>
						</div>
						<ol>
							<li>Open Hoccer App on your mobile</li>
							<li>Hit "Start Transfer" Button above</li>
							<li>Swipe over Hoccer canvas on your mobile</li>
						</ol>
					</div>
					<!-- <a href="#" id="receiveButton">Receive</a>
					<a href="#" id="sendButton">Send</a> -->
					<br style="clear: both" />
				</p></section>
			</div>
		</div>
	</div>
</body>
</html>
